<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>test 4</title>
	</head>
	<body>
		<div id="animatedElem" style="width:100px; height:100px; background-color:red; position:absolute">=</div>
		<script>
var elem = document.getElementById("animatedElem");
var left = 0;
var timer;
var lastDate = new Date();
// Move the element 10px on the right every 16ms
requestAnimationFrame(update);
function update(){
	var curDate = new Date();
	var timeDiff = Math.min(curDate-lastDate,100);
	lastDate = curDate;
	console.log(timeDiff);
	elem.style.left = ( left += 2*timeDiff/16 ) + "px";
	if ( left <= 900 ) {
		requestAnimationFrame(update);
	}
	pausecomp(40);
}
function pausecomp(millis) 
{
	var date = new Date();
	var curDate = null;
	do { 
		curDate = new Date(); 
	} while(curDate-date < millis);
}
		</script>
	</body>
</html>
