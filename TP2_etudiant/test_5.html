<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>test 5</title>
	</head>
	<body>
		<div id="animatedElem" style="width:100px; height:100px; background-color:red; position:absolute">=</div>
		<script>
var elem = document.getElementById("animatedElem");
var left = 0;
var fps = 30;
var lastDate = new Date();
// Move the element 10px on the right every 16ms
requestAnimationFrame(update);
function update(){
	var curDate = new Date();
	var timeDiff = Math.min(curDate-lastDate,100);
	lastDate = curDate;
	console.log(Math.floor(1000/timeDiff)+" fps");
	elem.style.left = ( left += 2*timeDiff/16 ) + "px";
	if ( left <= 900 ) {
		setTimeout(function(){requestAnimationFrame(update)}, 1000/fps);
	}
}
function pausecomp(millis) 
{
	var date = new Date();
	var curDate = null;
	do { 
		curDate = new Date(); 
	} while(curDate-date < millis);
}
		</script>
	</body>
</html>
