<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>tp5</title>
	</head>
	<body>
		<script>
//creation des carres
nb_carres = 10;
for(let i=0; i<nb_carres; i++){
	carre = document.createElement("div");
	carre.style.backgroundColor="red";
	carre.style.width="30px";
	carre.style.height="30px";
	carre.className="carre";
	document.body.appendChild(carre);
}
//initialisation des timers
marginsLeft = [];
clocks = [];
Ecarres = document.getElementsByClassName("carre");
setTimeout(start, 4000);
function start(){
	for(let i=0; i<Ecarres.length; i++){
		marginsLeft[i]=0;
		setTimeout(function(){
			let finalI=i;
			clocks[i] = setInterval(update, 100, finalI);
		},1000*i);
	}
}
function update(i){
	if(marginsLeft[i]<500){
		marginsLeft[i]+=10;
		Ecarres[i].style.marginLeft=marginsLeft[i]+"px"
	}else{
		clearInterval(clocks[i]);
	}
}
		</script>
	</body>
</html>
